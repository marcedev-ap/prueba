{"mappings":"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","sources":["src/components/text/index.ts","src/components/todo-item/index.ts","src/state.ts","src/index.ts","src/pages/home/index.ts"],"sourcesContent":["import { state } from \"../../state\";\n\nclass Text extends HTMLElement {\n  shadow: ShadowRoot;\n  tagName: string;\n  tags: string[] = [\"h1\", \"p\"];\n  tag: string = \"p\";\n  constructor() {\n    super();\n    this.shadow = this.attachShadow({ mode: \"open\" });\n\n    if (this.tags.includes(this.getAttribute(\"tag\"))) {\n      this.tag = this.getAttribute(\"tag\") || this.tag;\n    }\n\n    this.render();\n  }\n  render() {\n    const rootEl = document.createElement(this.tag);\n    rootEl.textContent = this.textContent;\n    this.shadow.appendChild(rootEl);\n  }\n}\ncustomElements.define(\"my-text\", Text);\n","customElements.define(\n  \"todo-item\",\n  class extends HTMLElement {\n    shadow: ShadowRoot;\n    title: string;\n    checked: boolean = false;\n    constructor() {\n      super();\n      this.shadow = this.attachShadow({ mode: \"open\" });\n    }\n    connectedCallback() {\n      this.title = this.getAttribute(\"title\") || \"\";\n      this.checked = this.hasAttribute(\"checked\");\n      this.id = this.getAttribute(\"id\");\n\n      const style = document.createElement(\"style\");\n      style.innerHTML = `\n        .root{\n          border-radius: 4px;\n          padding:22px 13px;\n          background-color:#FFF599;\n          font-size:18px;\n        }\n        .titulo.checked{\n          text-decoration:line-through; \n        }\n      `;\n      this.shadow.appendChild(style);\n\n      this.render();\n    }\n    addListeners() {\n      const chEl = this.shadow.querySelector(\".checkbox-input\");\n      chEl.addEventListener(\"click\", (e) => {\n        const target = e.target as any;\n        const event = new CustomEvent(\"change\", {\n          detail: {\n            id: this.id,\n            value: target.checked,\n          },\n        });\n        this.dispatchEvent(event);\n      });\n    }\n    render() {\n      const div = document.createElement(\"div\");\n      div.innerHTML = `\n        <div class=\"root\">\n          <h4 class=\"titulo ${this.checked ? \"checked\" : \"\"}\">${this.title}</h4>\n          <div>\n            <input class=\"checkbox-input\" type=\"checkbox\" ${\n              this.checked ? \"checked\" : \"\"\n            } />\n          </div>\n        </div>\n      `;\n      this.shadow.appendChild(div);\n      this.addListeners();\n    }\n  }\n);\n","const state = {\n  data: {\n    tasks: [\n      { id: 1, title: \"primer item\", completed: false },\n      { id: 2, title: \"segundo item\", completed: true },\n      { id: 3, title: \"tercer item\", deleted: true },\n    ],\n  },\n  listeners: [],\n  init() {\n    const localData = localStorage.getItem(\"saved-state\");\n    this.setState(JSON.parse(localData));\n  },\n  getState() {\n    return this.data;\n  },\n  getEnabledTasks() {\n    const currentState = this.getState();\n    return currentState.tasks.filter((t) => !t.deleted);\n  },\n  addTask(id, title) {\n    const currentState = this.getState();\n    currentState.tasks.push({ id, title, completed: false });\n    this.setState(currentState);\n  },\n  changeItemState(id, value) {\n    const currentState = this.getState();\n    const found = currentState.tasks.find((t) => t.id == id);\n    found.completed = value;\n    this.setState(currentState);\n  },\n  setState(newState) {\n    this.data = newState;\n    for (const cb of this.listeners) {\n      cb(newState);\n    }\n    localStorage.setItem(\"saved-state\", JSON.stringify(newState));\n    console.log(\"Soy el state, he cambiado\", this.data);\n  },\n  subscribe(callback: (any) => any) {\n    this.listeners.push(callback);\n  },\n};\n\nexport { state };\n","import \"./components/text\";\nimport \"./components/todo-item\";\nimport { initHomepage } from \"./pages/home\";\nimport { state } from \"./state\";\n(function () {\n  state.init();\n  initHomepage(document.querySelector(\".root\"));\n})();\n","import { state } from \"../../state\";\n\nexport function initHomepage(containerEl) {\n  const div = document.createElement(\"div\");\n  const tasks = state.getEnabledTasks();\n  console.log(tasks);\n\n  div.innerHTML = `\n    <h1>Mis pendientes</h1>\n    <button class=\"add-button\">Agregar</button>\n    <ul class=\"lista\"></ul>\n  `;\n  const listaEl = div.querySelector(\".lista\");\n\n  function createTasks(items) {\n    listaEl.innerHTML = \"\";\n    for (const item of items) {\n      const todoItemEl = document.createElement(\"todo-item\");\n      todoItemEl.setAttribute(\"title\", item.title);\n      todoItemEl.setAttribute(\"id\", item.id);\n      if (item.completed) {\n        todoItemEl.setAttribute(\"checked\", \"true\");\n      }\n      todoItemEl.addEventListener(\"change\", (e: any) => {\n        state.changeItemState(e.detail.id, e.detail.value);\n      });\n      listaEl.appendChild(todoItemEl);\n    }\n  }\n\n  state.subscribe(() => {\n    createTasks(state.getEnabledTasks());\n  });\n\n  createTasks(tasks);\n\n  div.querySelector(\".add-button\").addEventListener(\"click\", () => {\n    state.addTask(Math.random(), \"Desde el bot√≥n\");\n  });\n  containerEl.appendChild(div);\n}\n"],"names":["$5c1cb98a96d6685990da816191128263$var$Text","HTMLElement","super","tags","tag","shadow","this","attachShadow","mode","includes","getAttribute","render","[object Object]","rootEl","document","createElement","textContent","appendChild","customElements","define","checked","title","hasAttribute","id","style","innerHTML","querySelector","addEventListener","e","target","event","CustomEvent","detail","value","dispatchEvent","div","addListeners","$3bf3b04a899cbbe9a92c99cd4cfcddb4$export$c837a8b98c265ae3","data","tasks","completed","deleted","listeners","localData","localStorage","getItem","setState","JSON","parse","getState","filter","t","currentState","push","find","newState","cb","setItem","stringify","console","log","callback","init","containerEl","getEnabledTasks","listaEl","createTasks","items","item","todoItemEl","setAttribute","changeItemState","subscribe","addTask","Math","random","$8e92acada7fcbb1a53d13a09778943f6$export$405b52f1b78f065e"],"version":3,"file":"index.4af87537.js.map"}