class t extends HTMLElement{constructor(){super(),this.tags=["h1","p"],this.tag="p",this.shadow=this.attachShadow({mode:"open"}),this.tags.includes(this.getAttribute("tag"))&&(this.tag=this.getAttribute("tag")||this.tag),this.render()}render(){const t=document.createElement(this.tag);t.textContent=this.textContent,this.shadow.appendChild(t)}}customElements.define("my-text",t),customElements.define("todo-item",class extends HTMLElement{constructor(){super(),this.checked=!1,this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.title=this.getAttribute("title")||"",this.checked=this.hasAttribute("checked"),this.id=this.getAttribute("id");const t=document.createElement("style");t.innerHTML="\n        .root{\n          border-radius: 4px;\n          padding:22px 13px;\n          background-color:#FFF599;\n          font-size:18px;\n        }\n        .titulo.checked{\n          text-decoration:line-through; \n        }\n      ",this.shadow.appendChild(t),this.render()}addListeners(){this.shadow.querySelector(".checkbox-input").addEventListener("click",(t=>{const e=t.target,s=new CustomEvent("change",{detail:{id:this.id,value:e.checked}});this.dispatchEvent(s)}))}render(){const t=document.createElement("div");t.innerHTML=`\n        <div class="root">\n          <h4 class="titulo ${this.checked?"checked":""}">${this.title}</h4>\n          <div>\n            <input class="checkbox-input" type="checkbox" ${this.checked?"checked":""} />\n          </div>\n        </div>\n      `,this.shadow.appendChild(t),this.addListeners()}});const e={data:{tasks:[{id:1,title:"primer item",completed:!1},{id:2,title:"segundo item",completed:!0},{id:3,title:"tercer item",deleted:!0}]},listeners:[],init(){const t=localStorage.getItem("saved-state");this.setState(JSON.parse(t))},getState(){return this.data},getEnabledTasks(){return this.getState().tasks.filter((t=>!t.deleted))},addTask(t,e){const s=this.getState();s.tasks.push({id:t,title:e,completed:!1}),this.setState(s)},changeItemState(t,e){const s=this.getState();s.tasks.find((e=>e.id==t)).completed=e,this.setState(s)},setState(t){this.data=t;for(const e of this.listeners)e(t);localStorage.setItem("saved-state",JSON.stringify(t)),console.log("Soy el state, he cambiado",this.data)},subscribe(t){this.listeners.push(t)}};e.init(),function(t){const s=document.createElement("div"),i=e.getEnabledTasks();console.log(i),s.innerHTML='\n    <h1>Mis pendientes</h1>\n    <button class="add-button">Agregar</button>\n    <ul class="lista"></ul>\n  ';const n=s.querySelector(".lista");function d(t){n.innerHTML="";for(const s of t){const t=document.createElement("todo-item");t.setAttribute("title",s.title),t.setAttribute("id",s.id),s.completed&&t.setAttribute("checked","true"),t.addEventListener("change",(t=>{e.changeItemState(t.detail.id,t.detail.value)})),n.appendChild(t)}}e.subscribe((()=>{d(e.getEnabledTasks())})),d(i),s.querySelector(".add-button").addEventListener("click",(()=>{e.addTask(Math.random(),"Desde el bot√≥n")})),t.appendChild(s)}(document.querySelector(".root"));
//# sourceMappingURL=index.4af87537.js.map
